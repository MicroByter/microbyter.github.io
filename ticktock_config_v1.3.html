<!DOCTYPE html>
<html>
  
<head>
  <title>Globetrot Configuration - v1.2.1</title>
        <script type="text/javascript" src="autosuggest2.js"></script>
        <script type="text/javascript" src="suggestions2.js"></script>
  
<link rel='stylesheet' type='text/css' href='css/slate.min.css'>
  
<script src='js/slate.min.js'></script>
  
<style>
  
.title {
    padding: 15px 10px;
    text-transform: uppercase;
    font-family: 'PT Sans', sans-serif;
    font-size: 1.2em;
    font-weight: 500;
    color: #888888;
    text-align: center;
  }
  
</style>
  
    <script type="text/javascript">
	
	
	
	
	
            window.onload = function () {

                var oTextbox = new AutoSuggestControl(document.getElementById("lcity_picker"), new StateSuggestions());        
            }
 
 $(document).ready(function () {
 
           var chkControlLeft = document.getElementById('use_left_circle');
           var chkControlRight = document.getElementById('use_right_circle');
           //Hide div as default
           //$("#pnlContent").css("display", "none");
 
           // Handles checkbox 'click' event
           $(use_left_circle).click(function () {
               if ($(chkControlLeft).is(":checked")) {
                   $("#lcity_details").show("slow");
               }
               else {
                   $("#lcity_details").hide("slow");
               }
           });

           $(use_right_circle).click(function () {
               if ($(chkControlRight).is(":checked")) {
                   $("#rcity_details").show("slow");
               }
               else {
                   $("#rcity_details").hide("slow");
               }
           });
   });
 </script>


</head>

  
<body>
    


<h1 class='title'>Globetrot Configuration</h1>

    
<div class='item-container'>
      
<div class='item-container-content'>
        
<div class='item'>
          
Use this configuration page to choose the settings you would like applied to this app.
        
</div>
      
</div>
    
</div>

    
<div class='item-container'>
      
<div class='item-container-header'>Customizability</div>
      
      <div class="item-container-content">
        <label class="item">
          Theme Color:
          <select id="theme_picker" name="theme_picker" dir='rtl' class="item-select">
            <option class="item-select-option" value='0'>Black</option>
            <option class="item-select-option" value='1'>White</option>
          </select>
        </label>
      </div>
		<div class='item-container-content'>
		<label class='item'>
          Display Seconds Hand?        
		<input id='use_sec_hand' type='checkbox' class='item-toggle'>
		</label>
		</div>
		<div class='item-container-content'>
		<label class='item'>
          Display Left Circle?        
		<input id='use_left_circle' type='checkbox' class='item-toggle' checked>
		</label>
		</div>
		<div class='item-container-content'>
		<label class='item'>
          Display Right Circle?        
		<input id='use_right_circle' type='checkbox' class='item-toggle' checked>
		</label>
		</div>
	</div>

	  <div class="item-container" id="lcity_details">
      <div class="item-container-header">Left Circle Options</div>
      <div class="item-container-content">
        <label class="item">
          <div class="item-input-wrapper">
		  <input id="lcity_picker"  type="text" class="item-input" name="lcity_picker" placeholder="Enter City Name" style="text-transform:uppercase;" on keyup="javascript:this.value=this.value.toUpperCase();">
          </div>
  	    </label>
      </div>

	  <!--
      <div class="item-container-content">
        <label class="item">
          <div class="item-input-wrapper">
            <input id="lcity_label" type="text" class="item-input" name="lcity_label" placeholder="Left Label">
          </div>
  		  <div class='item-container-footer'>Add your own label - up to 3 characters.
		  </div>
        </label>
      </div> 
    </div>
	  -->
	<div class="item-container"  id="rcity_details">
      <div class="item-container-header">Right Circle Options</div>
      <div class="item-container-content">
        <label class="item">
          Right Circle City:
          <select id="rcity_picker" name="rcity_picker" dir='rtl' class="item-select">
            <option class="item-select-option" value='0'>ANCHORAGE</option>
            <option class="item-select-option" value='1'>ATHENS</option>
            <option class="item-select-option" value='2'>BANGKOK</option>
            <option class="item-select-option" value='3'>BEIJING</option>
            <option class="item-select-option" value='4'>BEIRUT</option>
            <option class="item-select-option" value='5'>BRUSSELS</option>
            <option class="item-select-option" value='6'>CAIRO</option>
            <option class="item-select-option" value='7'>DALLAS</option>
            <option class="item-select-option" value='8'>HONOLULU</option>>
            <option class="item-select-option" value='9'>LONDON</option>
            <option class="item-select-option" value='10'>LOS ANGELES</option>
            <option class="item-select-option" value='11'>MADRID</option>
            <option class="item-select-option" value='12'>MANILA</option>
            <option class="item-select-option" value='13'>MOSCOW</option>
            <option class="item-select-option" value='14'>NEW DELHI</option>
            <option class="item-select-option" value='15'>OSLO</option>
            <option class="item-select-option" value='16'>PARIS</option>
            <option class="item-select-option" value='17'>RIYADH</option>
            <option class="item-select-option" value='18'>SEOUL</option>
            <option class="item-select-option" value='19'>SINGAPORE</option>
            <option class="item-select-option" value='20'>SYDNEY</option>
            <option class="item-select-option" value='21'>TOKYO</option>
            <option class="item-select-option" value='22'>VATICAN CITY</option>
            <option class="item-select-option" value='23'>WASHINGTON DC</option>
            <option class="item-select-option" value='24'>ZURICH</option>
          </select>
        </label>
      </div>
<!--
      <div class="item-container-content">
        <label class="item">
          <div class="item-input-wrapper">
            <input id="rcity_label" type="text" class="item-input" name="rcity_label" placeholder="Right Label">
          </div>
		  <div class='item-container-footer'>Add your own label - up to 3 characters.
		  </div>
        </label>
-->      </div>
    </div>



<div class='item-container'>
    <div class='button-container'>  
	<input id='submit_button' type='button' class='item-button' value='SUBMIT'>  
	</div>
	<div class='item-container-footer'> <P><BR><P><Center>MicroByter Studios - Config Version 1.2.1</Center></P></BR></P></div>
</div>
</body>
</html>


<script>



function getConfigData() {
    
    var theme= document.getElementById('theme_picker');
    var lcity = document.getElementById('lcity_picker');
    var rcity = document.getElementById('rcity_picker');
	var useSeconds = document.getElementById('use_sec_hand');
	//var lcityLabel = document.getElementById('lcity_label');
	//var rcityLabel = document.getElementById('rcity_label');
	var useLeftCircle = document.getElementById('use_left_circle');
	var useRightCircle = document.getElementById('use_right_circle');

    var options = {
		'theme': theme.value,
		'lcity': lcity.value,
		'rcity': rcity.value,
		'useSeconds' : useSeconds.checked,
		//'lcityLabel' : lcityLabel.value.substring(0, 3),	
		//'rcityLabel' : rcityLabel.value.substring(0, 3),
		'useLeftCircle' : useLeftCircle.checked,
		'useRightCircle' : useRightCircle.checked,
	};


    // Save for next launch
    localStorage['theme'] = options['theme'];
    localStorage['lcity'] = options['lcity'];
    localStorage['rcity'] = options['rcity'];
    localStorage['useSeconds'] = options['useSeconds'];
    //localStorage['lcityLabel'] = options['lcityLabel'];
    //localStorage['rcityLabel'] = options['rcityLabel'];
    localStorage['useLeftCircle'] = options['useLeftCircle'];
    localStorage['useRightCircle'] = options['useRightCircle'];

    console.log('Got options: ' + JSON.stringify(options));
    return options;
  }

  function getQueryParam(variable, defaultValue) {
    var query = location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
      var pair = vars[i].split('=');
      if (pair[0] === variable) {
        return decodeURIComponent(pair[1]);
      }
    }
    return defaultValue || false;
  }
 
  var submitButton = document.getElementById('submit_button');
  submitButton.addEventListener('click', function() {
    console.log('Submit');

    // Set the return URL depending on the runtime environment
    var return_to = getQueryParam('return_to', 'pebblejs://close#');
    document.location = return_to + encodeURIComponent(JSON.stringify(getConfigData()));
  });

  (function() {
    var theme = document.getElementById('theme');
    var lcity= document.getElementById('lcity');
    var rcity= document.getElementById('rcity');
    var useSeconds= document.getElementById('useSeconds');
	//var lcityLabel= document.getElementById('lcityLabel');
	//var rcityLabel= document.getElementById('rcityLabel');
	var useLeftCircle= document.getElementById('useLeftCircle');
	var useRightCircle= document.getElementById('useRightCircle');
	
    // Load any previously saved configuration, if available
    if(localStorage['theme']) {
      theme_picker.value = localStorage['theme'];
      lcity_picker.value = localStorage['lcity'];
      rcity_picker.value = localStorage['rcity'];
      use_sec_hand.checked = JSON.parse(localStorage['useSeconds']);
      use_right_circle.checked = JSON.parse(localStorage['useRightCircle']);
      use_left_circle.checked = JSON.parse(localStorage['useLeftCircle']);
    }

    //if(localStorage['lcityLabel']) {
	//  lcity_label.value = localStorage['lcityLabel'];
	//  rcity_label.value = localStorage['rcityLabel'];
	//}

    if (use_left_circle.checked == false) {
		$("#lcity_details").hide("slow"); 
	}
	
    if (use_right_circle.checked == false) {
		$("#rcity_details").hide("slow");
    }


	
 })();
  </script>
</html>














